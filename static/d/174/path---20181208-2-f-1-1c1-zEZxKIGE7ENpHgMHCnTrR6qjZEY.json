{"data":{"site":{"siteMetadata":{"title":"Jon's Blog","author":""}},"markdownRemark":{"id":"21447b8f-3fac-5b43-b7a7-9ef8433a45e4","excerpt":"Ubuntu的apt源中有MySQL，目前是MySQL 5.7 目前从apt安装的mysql版本为:  这样就装上了，但是还需要配置。 shell输入 提示设置Validate Password Plugin，这一插件是用来检测密码强度的，按 不设置。 输入两遍密码：  删除默认自带的anonymous user…","html":"<p>Ubuntu的apt源中有MySQL，目前是MySQL 5.7</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> apt update\n<span class=\"token function\">sudo</span> apt <span class=\"token function\">install</span> mysql-server</code></pre></div>\n<p>目前从apt安装的mysql版本为: </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">forward@forward-Lenovo:~$ mysql --version\nmysql  Ver 14.14 Distrib 5.7.25, <span class=\"token keyword\">for</span> Linux <span class=\"token punctuation\">(</span>x86_64<span class=\"token punctuation\">)</span> using  EditLine wrapper</code></pre></div>\n<p>这样就装上了，但是还需要配置。</p>\n<p>shell输入</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> mysql_secure_installation</code></pre></div>\n<p>提示设置Validate Password Plugin，这一插件是用来检测密码强度的，按<code class=\"language-text\">n</code>不设置。</p>\n<p>输入两遍密码： <code class=\"language-text\">123</code></p>\n<p>删除默认自带的anonymous user, 按<code class=\"language-text\">y</code>,生产环境要记着删掉这个user</p>\n<p>禁用远程登录，只允许’localhost’登录，按<code class=\"language-text\">y</code></p>\n<p>移除test这个测试数据库和对其的访问权限，按<code class=\"language-text\">y</code></p>\n<p>重新加载权限表(privilege tables)，按<code class=\"language-text\">y</code></p>\n<p>done</p>\n<p>从Debian distribution安装将自动初始化MySQL data directory.</p>\n<p>不用进行其他配置,MySQL已经在自动运行了.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">systemctl status mysql.service</code></pre></div>\n<p>输出的信息中可以看到 Active: active(running),说明正在运行.</p>\n<p>默认情况下，MySQL的root用户的登录是通过<code class=\"language-text\">auth_socket</code>plugin</p>\n<p>要用密码登录MySQL的root用户，需改变登录方式为<code class=\"language-text\">mysql_native_password</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo mysql</code></pre></div>\n<p>查看并更改，运行后前面设置的密码将会被改了</p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre class=\"language-mysql\"><code class=\"language-mysql\">SELECT user,authentication_string,plugin,host FROM mysql.user;\n\nALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;ps123&#39;;</code></pre></div>\n<p>让服务器重新加载授权表使之生效</p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre class=\"language-mysql\"><code class=\"language-mysql\">FLUSH PRIVILEGES;</code></pre></div>\n<p>登录,以root身份(-u root),提示输入密码(-p)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mysql -u root -p</code></pre></div>\n<p>显示此时编码设置</p>\n<div class=\"gatsby-highlight\" data-language=\"mysql\"><pre class=\"language-mysql\"><code class=\"language-mysql\">mysql&gt; show variables like &#39;%char%&#39;;\n+--------------------------------------+----------------------------+\n| Variable_name                        | Value                      |\n+--------------------------------------+----------------------------+\n| character_set_client                 | utf8                       |\n| character_set_connection             | utf8                       |\n| character_set_database               | latin1                     |\n| character_set_filesystem             | binary                     |\n| character_set_results                | utf8                       |\n| character_set_server                 | latin1                     |\n| character_set_system                 | utf8                       |\n| character_sets_dir                   | /usr/share/mysql/charsets/ |\n| validate_password_special_char_count | 1                          |\n+--------------------------------------+----------------------------+\n9 rows in set (0.00 sec)</code></pre></div>\n<p>为避免以后可能出现的奇怪问题.将编码全改为utf8</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">cd</span> /etc/mysql/\n<span class=\"token function\">sudo</span> vim my.cnf</code></pre></div>\n<p>添加</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[client]\ndefault-character-set = utf8\n\n[mysqld]\ndefault-storage-engine = INNODB\ncharacter-set-server = utf8\ncollation-server = utf8_general_ci</code></pre></div>\n<p>重启MySQL</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> systemctl restart mysql.service</code></pre></div>\n<p>重新登录并查看编码配置:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql&gt; show variables like &#39;%char%&#39;;\n+--------------------------------------+----------------------------+\n| Variable_name                        | Value                      |\n+--------------------------------------+----------------------------+\n| character_set_client                 | utf8                       |\n| character_set_connection             | utf8                       |\n| character_set_database               | utf8                       |\n| character_set_filesystem             | binary                     |\n| character_set_results                | utf8                       |\n| character_set_server                 | utf8                       |\n| character_set_system                 | utf8                       |\n| character_sets_dir                   | /usr/share/mysql/charsets/ |\n| validate_password_special_char_count | 1                          |\n+--------------------------------------+----------------------------+\n9 rows in set (0.00 sec)</code></pre></div>\n<p>参考资料:</p>\n<ol>\n<li><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04\">https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-ubuntu-16-04</a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/00143450161807565b0c93cb65d4df0a733bf15dc1f8c79000\">https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/00143450161807565b0c93cb65d4df0a733bf15dc1f8c79000</a></li>\n</ol>","frontmatter":{"title":"ubuntu 18.04 安装mysql","date":"December 08, 2018","tags":null}}},"pageContext":{"previous":{"fields":{"urlPath":"/20180628"},"frontmatter":{"title":"promise一例","publish":true,"tags":["js","promise"]}},"next":null}}